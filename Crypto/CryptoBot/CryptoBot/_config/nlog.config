<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      autoReload="true"
      internalLogLevel="warn"
      internalLogFile="_log/internal-nlog.txt"
      throwConfigExceptions="true">


	<!-- the targets to write to -->
	<targets async="true">
		<!-- write logs to file  -->
		<target xsi:type="File" name="file" encoding="utf-8" 
				fileName="${currentdir:dir=_log}/log.txt" archiveFileName="${currentdir:dir=_log}/log-{########}.txt" createDirs="true"
				archiveEvery="Day"  archiveNumbering="Date" maxArchiveFiles="180" archiveOldFileOnStartup="false" 
				layout="${longdate} [${pad:padding=5:inner=${level:uppercase=true}}] (${threadid}) [${logger:shortName=True}] ${message} ${exception:format=tostring}" />
    
		<target xsi:type="File" name="verbose" encoding="utf-8" 
				fileName="${currentdir:dir=_log}/verbose.txt" archiveFileName="${currentdir:dir=_log}/verbose-{########}.txt"  createDirs="true"
				archiveEvery="Day"  archiveNumbering="Date" maxArchiveFiles="60"  archiveOldFileOnStartup="false"
				layout="${longdate} [${pad:padding=5:inner=${level:uppercase=true}}] (${threadid}) [${logger:shortName=True}] ${message} ${exception:format=tostring}" />
    
		<target xsi:type="Console" name="console"
				layout="${longdate} [${pad:padding=5:inner=${level:uppercase=true}}] (${threadid}) [${logger:shortName=True}] ${message} ${exception:format=tostring}" />
	</targets>

	<!-- rules to map from logger name to target -->
	<rules>
		<logger name="Microsoft.*" maxLevel="Warn" final="true" />
		<logger name="System.*" maxLevel="Warn" final="true" />
		<logger name="*.Program" minLevel="Trace" writeTo="file, console,verbose" final="true" />
    <logger name="*.MarketManager" minLevel="Trace" writeTo="file, console" final="true" />
    <logger name="verbose" minLevel="Trace" writeTo="verbose" final="true" />
    
		<logger name="*" minLevel="Trace" writeTo="file" />
		<logger name="*" minLevel="Warn" writeTo="console" />
	</rules>
</nlog>